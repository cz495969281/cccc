###1.什么决定了电商双11大促的成败
####没有稳定的数据库及服务器环境一切的一切皆是一场空

###2.数据库架构
	
 1 * master  --------->>>>  Slave * 15
 CPU64核 512内存

```如果master服务器出现问题的话，将一台数据最新的从服务器变成master服务器，然后再实行新主服务器和从服务器数据同步的操作，这个过程是非常消耗时间的，如果业务量特别大的情况下，会对主服务器的网卡容量来说是一个非常大的挑战，有可能造成故障(这是上家公司优化之前的处理方式)
```

```
QPS：Queries Per Second意思是“每秒查询率”，是一台服务器每秒能够相应的查询次数，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。

TPS：是TransactionsPerSecond的缩写，也就是事务数/秒。它是软件测试结果的测量单位。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数

从数据库集群的监控信息了解到QPS和TPS的值

磁盘IO(使用的fashion IO设备---吞吐量比普通磁盘大很多),磁盘IO在凌晨2点半的时候，发现读出现峰值，意味着服务器的性能极具下降，后来经检查发现是由于数据库备份远程同步计划任务导致的，最好不要在主库上数据库备份或者大型活动前取消这类计划

```

###3.影响数据库的因素
#### 1.sql查询速度
##### 超高的QPS和TPS  风险：效率低下的SQL  在大促情况下(双11，双12)网站的访问量增长，超高QPS和TPS的产生，在这个时候每处理一个sql的时间就至关重要了，在当前的mysql版本中，不支持多cpu并发运算，每一个sql只能用到一个cpu,QPS和TPS就能衡量一个数据库的处理效果，如果处理1个sql需要10ms，那么1s可以处理将近100个sql;如果1个sql需要100ms,那么1s可以处理将近10个sql,所以一个sql执行的效率是至关重要的；在以往的工作中按照经验来说数据库的性能百分之80都是慢查询造成的，可以将sql进行优化解决

##### 大量的并发和超高的CPU使用效率  风险：大量的并发---->数据库连接数被占满   超高的CPU使用率 -----> 因CPU的资源耗尽而出现宕机

```
并发量：同一时刻所需要数据库服务器处理的请求数量
连接量：往往比并发量大的多的多，前端服务器，ningx等都会跟服务器建立多个连接，只要几个会对数据库进行处理，大多数都处于sleep的状态
数据库的连接数往往是都限制的(max_connections默认是100)，设置过小可能导致一些处理请求连接不上，在前端页面出现500，502,504错误
```
	


#### 2.服务器硬件
#### 3.网卡流量
##### 风险：
		```
		网卡IO被占满（1000Mb/8 约等于 100MB): 出现无法连接数据的问题 ---> 解决方法：1.减少从服务器的数量，每一个从服务都要去主服务器去复制日志，从服务器越多，往往流量越大
				 2.缓存分级，避免前端的缓存大量突然失效，以导致数据库流量的冲击
				 3.避免使用'select * '这样的查询
				 4.将业务网络和服务器网络进行分离，避免主从同步，备份等作业的影响网络的性能
		```
#### 4.磁盘IO
##### 风险：
		```
		磁盘IO性能突然下降：发生热数据，远远大于服务器可用内存的情况下，解决方法，使用更快的磁盘设备(RAID卡,ssd等硬件来解决)；   其他大量消耗磁盘性能的任务计划(调整计划任务，做好磁盘维护)
		```
#########################